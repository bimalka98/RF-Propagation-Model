\documentclass[a4paper,11pt]{article}%,twocolumn
%\documentclass[a4paper,11pt]{article}
\input{settings/packages}
\input{settings/page}
\input{settings/macros}
\usepackage[ framed, numbered]{matlab-prettifier}%framed,%
\usepackage{listings}
\begin{document}

\input{content/title_page}
\tableofcontents

\begin{center}
	\textbf{\textit{* PDF is clickable}}
\end{center}
\pagebreak
%%-----------------------------------------------------------------------
\section{Modeling the RF propagation Using Matlab}
%%-----------------------------------------------------------------------
\subsection{Relationship between Free Space Path Loss and Frequency}

\textit{Consider  following meanings for the parameters}\\

\begin{tabular}{l l }
	$P_{RX}$ & = Received Power at the Receiving Antenna\\
	$P_{TX}$ & = Transmitted Power at the Transmitting Antenna\\
	$f$ & = Frequency of the wave in Hz\\
	$f_{GHz}$ & = Frequency of the wave in GHz\\
	$d$& = Distance between the antennas in m\\
	$d_{km}$& = Distance between the antennas in km\\
	$G_{TX}$& = Directive gain of the Transmitter\\
	$G_{RX}$& = Directive gain of the Receiver\\
	$c$& = Velocity of the electromagnetic waves in a vacuum\\

\end{tabular}\\[1cm]


The relationship between above parameters can be given as follows
\[
\begin{split}
P_{RX} & = P_{TX}.\frac{c^2}{(4\pi.f.d)^2}.G_{TX}.G_{RX}
\end{split}
\]
From the above equation, free space path loss, say $L$
\[
\begin{split}
L = \frac{(4\pi.f.d)^2}{c^2}
\end{split}
\]

By considering $\ 10.log_{10}()$ in both sides, Free Space Path Loss in dB, say $L_{dB}$

\[
\begin{split}
10.\log_{10}(L) &= 10.\log_{10}(\frac{(4\pi.f.d)^2}{c^2})\\
L_{dB}& = 10.\log_{10}((4\pi.f.d)^2) - 10.\log_{10}(c^2)\\
&=20.\log_{10}(4\pi.f.d)-20.\log_{10}(c)\\
&=20.\log_{10}(4\pi)-20.\log_{10}(c) + 20.\log_{10}(f) + 20.\log_{10}(d)\\
&=20.\log_{10}(\frac{4\pi}{c}) + 20.\log_{10}(f) + 20.\log_{10}(d)\\
&= -147.5522168 + 20.\log_{10}(f_{GHz}.10^9) + 20.\log_{10}(d_{km}.10^3)\\
& = -147.5522168 + 20.\log_{10}(10^9)+ 20.\log_{10}(f_{GHz}) + 20.\log_{10}(10^3) + 20.\log_{10}(d_{km})\\
&= -147.5522168 + 180+ 20.\log_{10}(f_{GHz}) + 60 + 20.\log_{10}(d_{km})\\
&= -147.5522168 + 240+ 20.\log_{10}(f_{GHz}) + 20.\log_{10}(d_{km})\\
&= +92.44778322+20.\log_{10}(f_{GHz}) + 20.\log_{10}(d_{km})
\end{split}
\]
Since transmitter and receiver are located at distance of 10km apart, by substituting $d_{km}= 10$.\\

Free Space Path Loss in dB, $L_{dB}$ as a function of frequency in Giga Hertz

\[
\begin{split}
L_{dB}(f_{GHz})&=  +112.44778322+20.\log_{10}(f_{GHz})
\end{split}
\]

\textbf{\textit{Note : Axes of the following plots are given in the logarithmic scale and range of frequency was chosen from 50 GHz to 1000 GHz since some of the ITU-R models are only defined in the 10 GHz-1000 GHz range.}}

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/FreeSpacePL.png}
	\caption{Relationship between Free Space Path Loss and Frequency}
\end{figure}



%%-----------------------------------------------------------------------
\pagebreak
\subsection{Rain attenuation, Fog attenuation and Atmospheric gas attenuation with Frequency}

\textit{Note : For the generation of following plots three of the Matlab built-in functions, namely \textbf{rainpl()\cite{matlab}, gaspl()\cite{matlab}, fogpl()\cite{matlab}} which are developed according to the ITU-R P Series recommendations were used and links for their documentations are given at the Reference section.}


\subsubsection{Rain attenuation - Recommendation ITU-R P.838-3, 2005\cite{rain}}
The following plot shows how losses due to rain varies with frequency. The plot assumes the followings in addition to the provided information in the Task 1.\\

\begin{tabular}{l l}
Elevation angle of the propagation path& = 0 \\
Polarization tilt angle of the signal &= 0\\
\end{tabular}\\

In general, horizontal polarization represents the worse case for propagation loss due to rain.

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/RainPL.png}
	\caption{Relationship between Rain attenuation and Frequency}
\end{figure}

\subsubsection{Fog attenuation - Recommendation ITU-R P.840-3, 2013\cite{fog}}
The following plot shows how losses due to fog/cloud varies with frequency. The plot assumes the following provided information in the Task 1.\\

\begin{tabular}{l l}
	Ambient Temperature in Celsius&= 31\\
	Liquid Water Density in $g/m^3$&= 0.5\\
\end{tabular}\\

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/FogPL.png}
	\caption{Relationship between Fog attenuation  and Frequency}
\end{figure}

\subsubsection{Atmospheric gas attenuation - Recommendation ITU-R P.676-10, 2013\cite{gas}}

The plot below shows how the propagation loss due to atmospheric gases varies with the frequency. The plot assumes the followings in addition to the provided information in the Task 1.

\begin{tabular}{l l}
	 Dry air pressure in Pa&= 101325\\
	 Water Vapor Density in $g/m^3$&= 30.4\cite{vapor}\\
\end{tabular}


\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/GasPL.png}
	\caption{Relationship between Atmospheric gas attenuation and Frequency}
\end{figure}


%%-----------------------------------------------------------------------
\subsection{Total Path Loss with Frequency}
\textit{Note : Range of frequency was chosen from 50 GHz to 1000 GHz since some of the ITU-R models are only defined in 10 GHz - 1000 GHz range.}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/TotalPL.png}
	\caption{Relationship between Total Path Loss and Frequency}
\end{figure}

By inspecting the figure we can conclude that the minimum propagation loss is given at the frequency of 50 GHz in the given range. Therefore from this point onward, for the calculations it will be the frequency for transmission.\\

Minimum Propagation Loss = 214.624 dB\\
Corresponding Frequency = 50 GHz\\



\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/AllinOne.png}
	\caption{Relationship between Various Path Losses and Frequency - All in One}
\end{figure}
%\subsection{Link Budget Calculation}
%
%Parameters For the propagation model
%\begin{tabular}{l r}
%Chosen transmission frequency & 10 GHz\\
%Total Path Loss & 136.9 dB\\
%Transmission power & 50 kW or 47 dB\\
%Transmitter Gain & 30 dB\\
%Receiver Gain &24.77 dB\\
%Link margin  &11 dB\\
%Cable loss at Transmitter & 3 dB\\
%Cable loss at Receiver &4 dB\\
%\end{tabular}\\[1cm]
%
%Let's find the actual received power at the receiver\\
%
%\begin{tabular}{|l l| r|}
%	\hline
%Received Power =	&Transmission power & +47 dB\\
%&	Cable loss at Transmitter & -3 dB\\
%&	Transmitter Gain & 30 dB\\
%&	Total Path Loss & -136.9 dB\\
%&	Receiver Gain &+24.77 dB\\
%&	Cable loss at Receiver &-4 dB\\\hline
%Received Power =&&-42.13 dB\\\hline\hline
%\end{tabular}\\[1cm]
%
%
%Therefore,\\
%\begin{center}
%	\begin{tabular}{l c c c}
%Link margin  & =& Received Power& - Receiver Sensitivity\\
%11 dB& = &-42.13 dB& - Receiver Sensitivity\\
%Receiver Sensitivity &= &-53.13 dB& \\\hline\hline
%	\end{tabular}
%\end{center}

\pagebreak
\subsection{Variation of the Signal Power with the Distance}

Parameters For the propagation model\\

\begin{tabular}{l r}
Chosen Carrier frequency & 50 GHz\\
Transmission power & 50 kW or 47 dB\\
Cable loss at Transmitter & 3 dB\\
Transmitter Gain & 30 dB\\
Receiver Gain &24.77 dB\\
Cable loss at Receiver &4 dB\\
Total Path Loss & Varies with Distance\\
\end{tabular}\\[1cm]

According to above values, Let's calculate the Power of the signal when leaving the  Transmission antenna, say $P_{dB}(0~km)$,

\[
\begin{split}
P_{dB}(0~km) & = Transmission~power -  Cable~loss~at~Transmitter + Transmitter~Gain\\
&=47-3+30\\
&=74~dB
\end{split}
\]

Free Space Path Loss in dB, $L_{dB}$ as a function of distance in kilo meters. By substituting $f_{GHz}$ = 50 to the equation derived in part 1.

\[
\begin{split}
L_{dB}(d_{km})&= +92.44778322+20.\log_{10}(50) + 20.\log_{10}(d_{km})\\
&=+92.44778322+ 33.97940009 + 20.\log_{10}(d_{km})\\
&=+126.4271833+ 20.\log_{10}(d_{km})\\
\end{split}
\]

Therefore, \[Total~Path~Loss = L_{dB}(d_{km}) + Rain~Attenuation+Fog~Attenuation+Atmospheric~Gas~Attenuation \]

Therefore the Signal Power when reaching the Receiving Antenna at $d_{km}$ distance,
\[
\begin{split}
P_{dB}(d_{km}) & =74~dB - Total~Path~Loss
\end{split}
\]

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.35]{figures/sp}
	\caption{Variation of the Signal Power with the Distance}
\end{figure}
\pagebreak

\subsection{Transmitting a voice signal over a noisy channel using the above Transmission frequency and the Propagation model.}

\begin{figure}[!h]
	\centering
	\includegraphics[scale = 0.36]{figures/voicePL}
	\caption{Variation of the Path Loss with Frequency in the Voice Signal}
\end{figure}

By inspecting the above figure, it can be concluded that the total Path Loss of the modulated Voice Signal is almost the same as that of the carrier wave (50 GHz) and therefore path loss variation due to the frequency in the above range can be neglected and can be assumed as a constant of 214.6240 dB.\\
Therefore for the following model, total path loss of the signal was taken as 214.6240 dB and it is included in the Free Space Loss block.

\subsubsection{RF Propagation Model - Simulink}

\begin{figure}[!h]
	\centering
	\includegraphics[scale = 0.42]{figures/spect2}
	\caption{Frequency Spectrum of the signal at Various States}
\end{figure}

\begin{figure}[!h]
	\centering
	\includegraphics[scale = 0.64, angle= 90]{figures/model}
	\caption{RF Propagation Model - Simulink}
\end{figure}


\pagebreak
\subsection{Codes for Task 1}
\lstinputlisting[basicstyle = \mlttfamily\scriptsize , style = Matlab-editor]{code/RFPL.m}

\lstinputlisting[basicstyle = \mlttfamily\scriptsize , style =
Matlab-editor]{code/plotCurve.m}
\vfill
\pagebreak

%=================================TASK TWO MANET============================

\section{Implementing a Simplified Version of the Dynamic Source Routing(DSR) Protocol in Ad Hoc Wireless Networks}
%%-----------------------------------------------------------------------

\subsection{Improving the Efficiency of Protocol by further Exploiting the Route Cache}

\subsubsection{Derestricting route format}
In the existing system, the entries in the route cache contain a specific format as [(target : route), (target : route) ..].
This generates the following inefficiency.
\begin{figure}[!h]
	\centering
	\includegraphics[scale = 0.4]{figures/route}
	\caption{A Route which is already in the Route Cache}
\end{figure}

Consider an instance where a packet has to be sent from node A to node C and also assume that the route to node D also exists in the route cache of A as (D : B, C, D)
The node A is unable to extract the route to node C from this entry as node C is not listed as the target node. Instead another route reply packet has to be initiated to find the path to node C.
If this format is derestricted and used in a manner such that the path to a node inside any entry can be extracted, the number of route request transmissions can be minimized, hence propagation time as well as CPU overhead required to process those packets is reduced.

\subsubsection{Intermediate nodes resolving a route request using their route caches}
In the existing system, once a node receives a route request, it checks to see if it is the target node for that packet and if not, it broadcasts the route request packet again.
As an alternative, once a node receives a route request, the following algorithm can be implemented.

\begin{verbatim}
IF packet ID already processed
   THEN skip packet
ELSE
   add packet ID to the recents list
   IF current node is target node
      THEN append current node ID to path and initiate RREP
   ELSE IF the path to destination exists in the routing cache of current node
      THEN append that route to path and initiate RREP
   ELSE
      append current node ID to path and broadcast
\end{verbatim}

This will enable the system to minimize route request transmissions.
However, steps have to be taken to avoid processing multiple route reply packets from multiple nodes and to select the shortest path among them.

\subsection{Handling Disconnections During Transmission}


To make the process of handling disconnections more robust, we propose that an acknowledgement message be sent during each transmission. For example, in a situation where a data packet is to be sent from node A to node D using the path A-B-C-D,
\begin{enumerate}[1.]
	\item Node A send the packet to node B but still keeps the packet in a buffer
	\item Node B receives the packet and sends an acknowledgement packet back to node A
	\item Node A receives the acknowledgement packet and clears the packet from its buffer
	\item The same process is repeated when the packet is sent from node B to node C and so on.
\end{enumerate}

A description on disconnections handling using this system follows.\\

Scenario : A data packet is to be sent from node A to node D along the pre-discovered path A-B-C-D\\
Error 	: Node C disconnects\\

As per the above sequence of steps, node B sends the data packet to node C but does not receive an acknowledgment packet. Hence, the data packet is retained in the buffer and more attempts are made to resend the data packet to node C in an exponentially decreasing rate. In order to completely terminate the attempt to send the packet to node C, a maximum number of attempts is also specified.If node C does not respond after the maximum number of attempts, node C will initiate the error handling procedure.\\

Node B will initially look into its own route cache and if there are any entries through C present in it, they will be removed. Secondly, a node error packet indicating the unavailability of node C will be transmitted to the source i.e. node A. Upon receiving this packet, node A will check its route cache for any entries containing node C. If such entries are found, they will be truncated at node C.


\subsection{Differences between DSR protocol  and Distance Vector Routing protocol}

Distance vector protocols rely on the information provided by the neighboring nodes. Each node periodically broadcasts the distance to every node within its transmission range. Based on this data, the source of a data packet computes the shortest path to the target by virtue of these distance values. The direction in this ‘vector’ routing protocol is embedded in the form of the nodes it passes\cite{dsr1}\cite{dsr2}.\\

Example : ‘The target 192.168.1.0/24 is 4 hops away in direction of next-hop B’\\

In dynamic source routing protocol, the sender itself decides the complete path that the packet has to take through a route discovery process and embeds the discovered path into the packet and hence the consequent nodes will merely have to check for the next hop and forward it accordingly.\\

\textbf{Advantages of Dynamic source routing}

\begin{itemize}
	\item In a time interval where no data packets are transmitted, a distance vector protocol will continuously broadcast routing advertisement messages whereas in dynamic source routing, route discovery procedure takes place only when data packets are in buffer.
\item These route advertisements employed in distance vector protocol also causes the nodes to process a large number of redundant messages which requires CPU overhead.
\item In dynamic source routing, each node possesses a route cache which contains pre discovered routes to multiple nodes. Therefore in a scenario where there is little to no movement of the nodes, these routes can be easily utilized without a route discovery process.
\item Even in a situation where node movement is significant, the route discovery process employed in dynamic source routing can yield in an effective route much faster than in the case of a distance vector routing protocol.

\end{itemize}

\subsection{Codes for Task 2}

\vfill
\hrule
\vspace{1cm}
\bibliographystyle{plain}
\bibliography{refer}

%---------------------------------------------------------------------------
\end{document}
